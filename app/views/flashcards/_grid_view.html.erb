<%= turbo_frame_tag 'results'  do %>

<!-- Grid view & List view -->
  <div class="bg-gray-200 text-sm text-gray-500 leading-none border-2 border-gray-200 rounded-full inline-flex">
  <%# <button class="inline-flex items-center transition-colors duration-300 ease-in focus:outline-none hover:text-blue-400 focus:text-blue-400 rounded-l-full px-4 py-2 active" id="grid"> %>
  <%= link_to grid_flashcards_path, id: 'grid', class: 'inline-flex items-center transition-colors duration-300 ease-in focus:outline-none hover:text-blue-400 focus:text-blue-400 rounded-l-full px-4 py-2 active', data: {turbo_frame: 'results'} do %>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fill-current w-4 h-4 mr-2"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
    <span>Grid</span>
  <% end %>
  <%# <button class="inline-flex items-center transition-colors duration-300 ease-in focus:outline-none hover:text-blue-400 focus:text-blue-400 rounded-r-full px-4 py-2" id="list"> %>
  <%= link_to list_flashcards_path, id: 'list', class: 'inline-flex items-center transition-colors duration-300 ease-in focus:outline-none hover:text-blue-400 focus:text-blue-400 rounded-r-full px-4 py-2',  data: {turbo_frame: 'results'}  do %>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fill-current w-4 h-4 mr-2"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
    <span>List</span>
  <% end %>
</div>



<style>
  /*@apply bg-white text-blue-400 rounded-full;*/
  .active {background: white; border-radius: 9999px; color: #63b3ed;}
</style>
<!--End of Grid view & List view -->

  <%= simple_form_for("", url: grid_flashcards_path, method: :get, 
      html: { 
        "data-turbo-frame": "results", 
        "data-turbo-action": "advance", 
        "data-controller": "form", 
        "data-action": "input->form#submit" }
      ) do |f| %>
    <div class="flex justify-center gap-2">
      <div>
        <%= f.input :front, label: false, input_html: { placeholder: 'Name...', value: params[:front] } %>
      </div>
      <div>
        <%= f.input :sort_by, label: false, as: :select, collection: [['Highest Accuracy', 'highest_accuracy'], ['Lowest Accuracy', 'lowest_accuracy'], ['Name', 'name']], prompt: "Sort By", selected: params[:sort_by] %>
      </div>
      <div class="flex align-center">
        <%= f.button :submit, "Search" %>
      </div>
    </div>
  <% end %>

<div data-controller="checkbox" data-turbo_frame="results">
  <legend class="sr-only">Select All</legend>
  <div class="space-y-5">
    <div class="relative flex justify-center items-start">
      <div class="flex h-6 items-center">
        <input id="comments" aria-describedby="comments-description" name="comments" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600" data-checkbox-target="selectAll" data-action="click->checkbox#toggle">
      </div>
      <div class="ml-3 text-sm leading-6">
        <label for="comments" class="font-medium text-gray-900">Select All</label>
      </div>
    </div>
  </div>


<div class="flex flex-wrap gap-2 mt-8 justify-center">
<% @flashcards.each do |flashcard| %>

  <%= turbo_frame_tag dom_id(flashcard) do%>

    <p class="notice"><%= notice %></p>
    <p class="alert"><%= alert %></p>
    <p class="error"><%= flash[:error] %></p> 

    <div id="search_results" class="flex-col">

    <!-- Checkbox -->
    <input type="checkbox" class="" id="checkbox_<%= flashcard.id %>" name="selected_flashcards[]" data-checkbox-target="checkbox">
    <label for="checkbox_<%= flashcard.id %>" class="absolute top-0 right-0 mt-4 mr-4"></label>

    <a
      data-turbo-frame = "_top"
      class="block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"
    >
      <h5
        class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"
      >
      <%= flashcard.front %>
      </h5>
      <p class="font-normal text-gray-700 dark:text-gray-400">
        <%= flashcard.back %>
      </p>
    </a>
    <!-- -->


    <% if current_user %>
      <% if current_user.deck.deck_flashcards.exists?(flashcard_id: flashcard.id) %>
        <%= button_to 'Remove from Deck', remove_flashcard_user_deck_path(current_user.id, current_user.deck, flashcard_id: flashcard.id), class: "rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600", method: :delete %>
      <% else %>
        <%= button_to 'Add to Deck', add_flashcard_user_deck_path(current_user.id, current_user.deck, flashcard_id: flashcard.id), class: "rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600", method: :post %>
      <% end %>
    <% end %>

    <%= link_to "Flashcard Details", flashcard_path(flashcard), data: {turbo_frame: "_top"} %>
    </div>
  <% end %>
<% end %>
<% end %>

</div>